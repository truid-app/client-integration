<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="792px" preserveAspectRatio="none" style="width:1247px;height:792px;" version="1.1" viewBox="0 0 1247 792" width="1247px" zoomAndPan="magnify"><defs><filter height="300%" id="f1k7slm7ivt2bl" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke: #A80036; stroke-width: 1.0;" x1="31" x2="31" y1="38.4883" y2="645.5625"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="31" x2="31" y1="645.5625" y2="673.5625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="31" x2="31" y1="673.5625" y2="752.1836"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="464" x2="464" y1="38.4883" y2="645.5625"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="464" x2="464" y1="645.5625" y2="673.5625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="464" x2="464" y1="673.5625" y2="752.1836"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="570.5" x2="570.5" y1="38.4883" y2="645.5625"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="570.5" x2="570.5" y1="645.5625" y2="673.5625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="570.5" x2="570.5" y1="673.5625" y2="752.1836"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="879" x2="879" y1="38.4883" y2="645.5625"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="879" x2="879" y1="645.5625" y2="673.5625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="879" x2="879" y1="673.5625" y2="752.1836"/><rect fill="#FEFECE" filter="url(#f1k7slm7ivt2bl)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="42" x="8" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="15" y="23.5352">App</text><rect fill="#FEFECE" filter="url(#f1k7slm7ivt2bl)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="42" x="8" y="751.1836"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="15" y="771.7188">App</text><rect fill="#FEFECE" filter="url(#f1k7slm7ivt2bl)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="84" x="420" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="427" y="23.5352">TruID App</text><rect fill="#FEFECE" filter="url(#f1k7slm7ivt2bl)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="84" x="420" y="751.1836"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="427" y="771.7188">TruID App</text><rect fill="#FEFECE" filter="url(#f1k7slm7ivt2bl)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="71" x="533.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="540.5" y="23.5352">Backend</text><rect fill="#FEFECE" filter="url(#f1k7slm7ivt2bl)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="71" x="533.5" y="751.1836"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="540.5" y="771.7188">Backend</text><rect fill="#FEFECE" filter="url(#f1k7slm7ivt2bl)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="116" x="819" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="826" y="23.5352">TruID REST API</text><rect fill="#FEFECE" filter="url(#f1k7slm7ivt2bl)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="116" x="819" y="751.1836"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="826" y="771.7188">TruID REST API</text><polygon fill="#A80036" points="559,65.7988,569,69.7988,559,73.7988,563,69.7988" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="31" x2="565" y1="69.7988" y2="69.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="38" y="65.0566">C-1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="242" x="68" y="65.0566">https://example.com/confirm-signup</text><polygon fill="#A80036" points="42,100.1094,32,104.1094,42,108.1094,38,104.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="36" x2="570" y1="104.1094" y2="104.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="48" y="99.3672">C-2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="78" y="99.3672">200 OK</text><path d="M576,82.7988 L576,107.7988 L1036,107.7988 L1036,92.7988 L1026,82.7988 L576,82.7988 " fill="#FBFB77" filter="url(#f1k7slm7ivt2bl)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1026,82.7988 L1026,92.7988 L1036,92.7988 L1026,82.7988 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="439" x="582" y="100.3672">Location: https://api.truid.app/oauth2/v1/authorize/confirm-signup</text><polygon fill="#A80036" points="452,177.6963,462,181.6963,452,185.6963,456,181.6963" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="31" x2="458" y1="181.6963" y2="181.6963"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="38" y="176.9541">O-3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="377" x="70" y="176.9541">https://api.truid.app/oauth2/v1/authorize/confirm-signup</text><path d="M469,122.1094 L469,223.1094 L820,223.1094 L820,132.1094 L810,122.1094 L469,122.1094 " fill="#FBFB77" filter="url(#f1k7slm7ivt2bl)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M810,122.1094 L810,132.1094 L820,132.1094 L810,122.1094 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="475" y="139.6777">response_type=code</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="475" y="154.9883">client_id=123</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="215" x="475" y="170.2988">scope=veritru.me/claim/email/v1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="330" x="475" y="185.6094">redirect_uri=https://example.com/continue-signup</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="475" y="200.9199">state=ABC</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="475" y="216.2305">nonce=DEF</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="464" x2="506" y1="254.2832" y2="254.2832"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="506" x2="506" y1="254.2832" y2="267.2832"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="465" x2="506" y1="267.2832" y2="267.2832"/><polygon fill="#A80036" points="475,263.2832,465,267.2832,475,271.2832,471,267.2832" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="471" y="249.541">Secure Identity</text><polygon fill="#A80036" points="42,312.9043,32,316.9043,42,320.9043,38,316.9043" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="36" x2="463" y1="316.9043" y2="316.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="48" y="312.1621">O-4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="80" y="312.1621">https://example.com/continue-signup</text><path d="M469,280.2832 L469,335.2832 L562,335.2832 L562,290.2832 L552,280.2832 L469,280.2832 " fill="#FBFB77" filter="url(#f1k7slm7ivt2bl)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M552,280.2832 L552,290.2832 L562,290.2832 L552,280.2832 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="64" x="475" y="297.8516">code=XYZ</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="475" y="313.1621">state=ABC</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="475" y="328.4727">nonce=DEF</text><polygon fill="#A80036" points="559,382.8359,569,386.8359,559,390.8359,563,386.8359" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="31" x2="565" y1="386.8359" y2="386.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="38" y="382.0938">C-5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="68" y="382.0938">https://example.com/continue-signup</text><path d="M576,350.2148 L576,405.2148 L680,405.2148 L680,360.2148 L670,350.2148 L576,350.2148 " fill="#FBFB77" filter="url(#f1k7slm7ivt2bl)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M670,350.2148 L670,360.2148 L680,360.2148 L670,350.2148 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="64" x="582" y="367.7832">code=XYZ</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="73" x="582" y="383.0938">state=SABC</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="582" y="398.4043">nonce=NABC</text><polygon fill="#A80036" points="867,468.0781,877,472.0781,867,476.0781,871,472.0781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="571" x2="873" y1="472.0781" y2="472.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="578" y="467.3359">O-6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="247" x="610" y="467.3359">https://api.truid.app/oauth2/v1/token</text><path d="M884,420.1465 L884,506.1465 L1235,506.1465 L1235,430.1465 L1225,420.1465 L884,420.1465 " fill="#FBFB77" filter="url(#f1k7slm7ivt2bl)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1225,420.1465 L1225,430.1465 L1235,430.1465 L1225,420.1465 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="198" x="890" y="437.7148">grant_type=authorization_code</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="64" x="890" y="453.0254">code=XYZ</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="330" x="890" y="468.3359">redirect_uri=https://example.com/continue-signup</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="890" y="483.6465">client_id=123</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="890" y="498.957">client_secret=ABC</text><polygon fill="#A80036" points="582,568.6309,572,572.6309,582,576.6309,578,572.6309" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="576" x2="878" y1="572.6309" y2="572.6309"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="588" y="567.8887">O-7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="620" y="567.8887">200 OK</text><path d="M884,520.6992 L884,606.6992 L1120,606.6992 L1120,530.6992 L1110,520.6992 L884,520.6992 " fill="#FBFB77" filter="url(#f1k7slm7ivt2bl)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1110,520.6992 L1110,530.6992 L1120,530.6992 L1110,520.6992 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="890" y="538.2676">access_token=ACCESS-ABCDEF</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="890" y="553.5781">token_type=bearer</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="890" y="568.8887">expires_in=3600</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="890" y="584.1992">refresh_token=REFRESH-ABCDEF</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="215" x="890" y="599.5098">scope=veritru.me/claim/email/v1</text><polygon fill="#A80036" points="42,633.5625,32,637.5625,42,641.5625,38,637.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="36" x2="570" y1="637.5625" y2="637.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="48" y="632.8203">C-8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="78" y="632.8203">200 OK</text><polygon fill="#A80036" points="867,695.873,877,699.873,867,703.873,871,699.873" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="571" x2="873" y1="699.873" y2="699.873"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="578" y="695.1309">V-9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="254" x="608" y="695.1309">https://api.truid.app/oidc/v1/user-info</text><path d="M884,678.5625 L884,703.5625 L1056,703.5625 L1056,688.5625 L1046,678.5625 L884,678.5625 " fill="#FBFB77" filter="url(#f1k7slm7ivt2bl)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1046,678.5625 L1046,688.5625 L1056,688.5625 L1046,678.5625 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="890" y="696.1309">Bearer: ACCESS-ABCDEF</text><polygon fill="#A80036" points="582,730.1836,572,734.1836,582,738.1836,578,734.1836" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="576" x2="878" y1="734.1836" y2="734.1836"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="35" x="588" y="729.4414">V-10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="627" y="729.4414">200 OK</text><!--
@startuml

participant "App" as APP
participant "TruID App" as TID
participant "Backend" as BE
participant "TruID REST API" as API

autonumber 1

autonumber resume "<b>C-0"
APP -> BE: https://example.com/confirm-signup

BE - -> APP: 200 OK
note right
  Location: https://api.truid.app/oauth2/v1/authorize/confirm-signup
end note

autonumber resume "<b>O-0"
APP -> TID : https://api.truid.app/oauth2/v1/authorize/confirm-signup
note right
  response_type=code
  client_id=123
  scope=veritru.me/claim/email/v1
  redirect_uri=https://example.com/continue-signup
  state=ABC
  nonce=DEF
end note

autonumber stop
TID -> TID: Secure Identity

autonumber resume "<b>O-0"
TID -> APP : https://example.com/continue-signup
note right
  code=XYZ
  state=ABC
  nonce=DEF
end note

autonumber resume "<b>C-0"
APP -> BE: https://example.com/continue-signup
note right
  code=XYZ
  state=SABC
  nonce=NABC
end note

autonumber resume "<b>O-0"
BE -> API: https://api.truid.app/oauth2/v1/token
note right
  grant_type=authorization_code
  code=XYZ
  redirect_uri=https://example.com/continue-signup
  client_id=123
  client_secret=ABC
end note

autonumber resume "<b>O-0"
API - -> BE : 200 OK
note right
  access_token=ACCESS-ABCDEF
  token_type=bearer
  expires_in=3600
  refresh_token=REFRESH-ABCDEF
  scope=veritru.me/claim/email/v1
end note

autonumber resume "<b>C-0"
BE - -> APP: 200 OK

...

autonumber resume "<b>V-0"
BE -> API: https://api.truid.app/oidc/v1/user-info
note right
  Bearer: ACCESS-ABCDEF
end note
API - -> BE: 200 OK

@enduml

PlantUML version 1.2019.06(Fri May 24 19:10:25 CEST 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.13+8-LTS
Operating System: Mac OS X
OS Version: 12.6
Default Encoding: UTF-8
Language: en
Country: SE
--></g></svg>